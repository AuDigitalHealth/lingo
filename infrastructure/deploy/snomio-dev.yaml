snomio:
  image: nctsacr.azurecr.io/snomio:latest
  hostNames:
    - snomio-dev.australiaeast.cloudapp.azure.com
    - dev-snomio.ihtsdotools.org
  snowstorm:
    host: dev-au-authoring.ihtsdotools.org
    apiPath: /snowstorm/snomed-ct
    defaultBranch: MAIN/SNOMEDCT-AU/AUAMT
  attachments:
    store:
      shareName: snomio-dev-attachments
  config:
    spring.flyway.baseline-on-migrate: true
    spring.datasource.url: jdbc:postgresql://ncts-db.postgres.database.azure.com/snomio_dev
    ihtsdo.ap.api.url: https://dev-snowstorm.ihtsdotools.org/authoring-services
    ihtsdo.ims.api.url: https://dev-ims.ihtsdotools.org
    ihtsdo.ims.api.cookie.name: dev-ims-ihtsdo
    security.enable-csrf: "false"
    ihtsdo.ap.projectKey: AUAMT
    ihtsdo.ims.api.cookie.value: ""
    ihtsdo.base.api.url: https://dev-snowstorm.ihtsdotools.org
    ihtsdo.snowstorm.api.url: https://dev-au-authoring.ihtsdotools.org/snowstorm/snomed-ct
    caching.spring.usersTTL: "3600000"
    logging.level.com.csiro.snomio.service.SnowstormClient: DEBUG
  tolerations:
    - key: "kubernetes.azure.com/scalesetpriority"
      operator: "Equal"
      value: "spot"
      effect: "NoSchedule"

nginx-ingress:
  controller:
    service:
      annotations:
        service.beta.kubernetes.io/azure-dns-label-name: snomio-dev
      name: snomio-nginx-dev
      controllerValue: 'k8s.io/snomio-nginx-dev'
    ingressClass: 'snomio-nginx-dev'
    config:
      entries:
        log-format: "proxy_host:$proxy_host $remote_addr [$time_local]" "traceID:$opentracing_context_x_b3_traceid" "$request" $status "$http_referer" "$http_x_forwarded_for" "$http_host" "$request_uri" "$upstream_addr" "upstream_response_time:$upstream_response_time" "$upstream_status" "$scheme"

ingress:
  class: snomio-nginx-dev
